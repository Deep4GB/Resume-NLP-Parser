<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resume Parsing</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.0/dist/chart.min.js"></script>
</head>
<body class="bg-gray-900 text-white min-h-screen flex flex-col">

    <h1 class="text-3xl mt-8 text-center">Resume Parsing</h1>

    <form method="POST" action="/upload" enctype="multipart/form-data" class="text-center mt-10" id="resume-form">
        <label for="resume_file" class="block mb-5">Upload your resume:</label>
        <input type="file" name="resume_file" class="bg-gray-700 text-white p-2 rounded-md">
        <br>
        <button type="submit" class="bg-blue-600 text-white p-2 rounded-md cursor-pointer mt-5" id="parse-button">
            Parse Resume
        </button>
    </form>

    <div id="loading" class="hidden text-center mt-10">
        <p class="text-xl">Parsing your resume...</p>
        <div class="animate-spin mt-4 mx-auto text-blue-600">&#9696;</div>
    </div>

    <div id="results" class="hidden text-center mt-6">
        <h2 class="text-xl">Parsed Resume Information:</h2>
        <div class="flex justify-center mt-4">
            <div class="w-1/2 bg-gray-800 p-4 rounded-md ml-8">
                <ul class="text-left" id="parsed-data">
                    <!-- Parsed data will be displayed here dynamically using JavaScript -->
                </ul>
            </div>
            <div class="w-1/2 bg-gray-800 p-4 rounded-md ml-6 mr-8">
                <!-- Placeholder for your graph -->
                <div class="bg-blue-600 h-32 rounded-md mb-4">Graph Placeholder</div>
                <!-- Placeholder for your rating -->
                <div class="bg-yellow-500 h-10 rounded-md">Rating Placeholder</div>
            </div>
        </div>
        <button type="button" class="bg-blue-600 text-white p-2 rounded-md cursor-pointer mx-auto mt-8" id="parse-another-button">
            Parse Another Resume
        </button>
    </div>

    <div class="w-10% mx-auto">
        <!-- 10% margin on left and right side -->
    </div>

    <footer class="bg-gray-700 p-4 mt-auto text-center">
        <p class="text-base">Developed by 4 DPs | <a href="https://github.com/Deep4GB/Resume-NLP-Parser" class="text-blue-400 hover:underline" target="_blank">GitHub</a></p>
    </footer>

    <script>
        const resumeForm = document.getElementById('resume-form');
        const parseButton = document.getElementById('parse-button');
        const loading = document.getElementById('loading');
        const results = document.getElementById('results');
        const parsedData = document.getElementById('parsed-data');
        const parseAnotherButton = document.getElementById('parse-another-button');

        // Function to center the "Parse Resume" button
        function centerParseButton() {
            parseButton.style.display = 'block';
            parseButton.style.margin = '0 auto';
        }

        resumeForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            parseButton.style.display = 'none';
            loading.style.display = 'block';

            // Simulate parsing with a delay (you should replace this with your actual parsing logic)
            setTimeout(() => {
                loading.style.display = 'none';
                results.style.display = 'block';
                parseAnotherButton.style.display = 'block'; // Show the "Parse Another Resume" button

                // Replace this with your parsed data
                const parsedResume = {
                    Name: 'John Doe',
                    Email: 'johndoe@example.com',
                    Phone: '123-456-7890',
                    Skills: ['Skill 1', 'Skill 2'],
                    Experience: '5 years',
                    Education: 'B.S. in Computer Science'
                };

                Object.keys(parsedResume).forEach(key => {
                    const li = document.createElement('li');
                    li.innerHTML = `<strong>${key}:</strong> ${parsedResume[key]}`;
                    parsedData.appendChild(li);
                });

                // Create a Chart.js circular graph (replace with your own data)
                const ctx = document.getElementById('fit-chart').getContext('2d');
                const data = {
                    labels: ['Fit Percentage'],
                    datasets: [{
                        data: [75], // Adjust this value as needed
                        backgroundColor: ['rgba(75, 192, 192, 0.6)'],
                    }],
                };

                const options = {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            display: false,
                        },
                        y: {
                            display: false,
                        },
                    },
                };

                const myChart = new Chart(ctx, {
                    type: 'doughnut',
                    data: data,
                    options: options,
                });
            }, 2000); // Simulated 2-second delay
        });

        // Add event listener for the "Parse Another Resume" button
        parseAnotherButton.addEventListener('click', () => {
            results.style.display = 'none';
            parsedData.innerHTML = ''; // Clear previous parsed data
            parseAnotherButton.style.display = 'none';
            centerParseButton(); // Center the "Parse Resume" button
        });
    </script>

</body>
</html>
